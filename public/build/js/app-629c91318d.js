
(function(document,window){window.ready=function(fn){if(document.readyState!='loading'){fn();}else{document.addEventListener('DOMContentLoaded',fn);}}}(document,window));(function(document,window){var styleText='::-moz-focus-inner{border:0 !important;}:focus{outline: none !important;';var unfocus_style=document.createElement('STYLE');window.unfocus=function(){document.getElementsByTagName('HEAD')[0].appendChild(unfocus_style);document.addEventListener('mousedown',function(){unfocus_style.innerHTML=styleText+'}';});document.addEventListener('keydown',function(){unfocus_style.innerHTML='';});};unfocus.style=function(style){styleText+=style;};unfocus();})(document,window);var forEach=function(collection,callback,scope){if(Object.prototype.toString.call(collection)==='[object Object]'){for(var prop in collection){if(Object.prototype.hasOwnProperty.call(collection,prop)){callback.call(scope,collection[prop],prop,collection);}}}else{for(var i=0,len=collection.length;i<len;i++){callback.call(scope,collection[i],i,collection);}}};(function(window,document){var _config={class:'is-empty'};var _toggleClass=function(element){if(element.value===''){element.classList.add(_config.class);}else{element.classList.remove(_config.class);}}
var isempty=function(nodeList,userConfig){if(!NodeList.prototype.isPrototypeOf(nodeList)){userConfig=nodeList||{};nodeList=document.querySelectorAll('textarea, input:not([type=hidden]):not([type="radio"]):not([type="checkbox"]):not([type="submit"]):not([type="button"])');}
for(var attrname in userConfig){_config[attrname]=userConfig[attrname];}
Array.prototype.forEach.call(nodeList,function(el){window.setTimeout(function(){_toggleClass(el);},100);el.addEventListener('keyup',function(){_toggleClass(el);});el.addEventListener('blur',function(){_toggleClass(el);});});return isempty;};window.isempty=isempty;}(window,document));(function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return typeof x==='function'||(typeof x==='object'&&x!==null);}
function lib$es6$promise$utils$$isFunction(x){return typeof x==='function';}
function lib$es6$promise$utils$$isMaybeThenable(x){return typeof x==='object'&&x!==null;}
var lib$es6$promise$utils$$_isArray;if(!Array.isArray){lib$es6$promise$utils$$_isArray=function(x){return Object.prototype.toString.call(x)==='[object Array]';};}else{lib$es6$promise$utils$$_isArray=Array.isArray;}
var lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray;var lib$es6$promise$asap$$len=0;var lib$es6$promise$asap$$vertxNext;var lib$es6$promise$asap$$customSchedulerFn;var lib$es6$promise$asap$$asap=function asap(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback;lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg;lib$es6$promise$asap$$len+=2;if(lib$es6$promise$asap$$len===2){if(lib$es6$promise$asap$$customSchedulerFn){lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);}else{lib$es6$promise$asap$$scheduleFlush();}}}
function lib$es6$promise$asap$$setScheduler(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn;}
function lib$es6$promise$asap$$setAsap(asapFn){lib$es6$promise$asap$$asap=asapFn;}
var lib$es6$promise$asap$$browserWindow=(typeof window!=='undefined')?window:undefined;var lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{};var lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;var lib$es6$promise$asap$$isNode=typeof self==='undefined'&&typeof process!=='undefined'&&{}.toString.call(process)==='[object process]';var lib$es6$promise$asap$$isWorker=typeof Uint8ClampedArray!=='undefined'&&typeof importScripts!=='undefined'&&typeof MessageChannel!=='undefined';function lib$es6$promise$asap$$useNextTick(){return function(){process.nextTick(lib$es6$promise$asap$$flush);};}
function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);};}
function lib$es6$promise$asap$$useMutationObserver(){var iterations=0;var observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);var node=document.createTextNode('');observer.observe(node,{characterData:true});return function(){node.data=(iterations=++iterations%2);};}
function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel();channel.port1.onmessage=lib$es6$promise$asap$$flush;return function(){channel.port2.postMessage(0);};}
function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1);};}
var lib$es6$promise$asap$$queue=new Array(1000);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){var callback=lib$es6$promise$asap$$queue[i];var arg=lib$es6$promise$asap$$queue[i+1];callback(arg);lib$es6$promise$asap$$queue[i]=undefined;lib$es6$promise$asap$$queue[i+1]=undefined;}
lib$es6$promise$asap$$len=0;}
function lib$es6$promise$asap$$attemptVertx(){try{var r=require;var vertx=r('vertx');lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext;return lib$es6$promise$asap$$useVertxTimer();}catch(e){return lib$es6$promise$asap$$useSetTimeout();}}
var lib$es6$promise$asap$$scheduleFlush;if(lib$es6$promise$asap$$isNode){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useNextTick();}else if(lib$es6$promise$asap$$BrowserMutationObserver){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMutationObserver();}else if(lib$es6$promise$asap$$isWorker){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMessageChannel();}else if(lib$es6$promise$asap$$browserWindow===undefined&&typeof require==='function'){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$attemptVertx();}else{lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useSetTimeout();}
function lib$es6$promise$then$$then(onFulfillment,onRejection){var parent=this;var child=new this.constructor(lib$es6$promise$$internal$$noop);if(child[lib$es6$promise$$internal$$PROMISE_ID]===undefined){lib$es6$promise$$internal$$makePromise(child);}
var state=parent._state;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,parent._result);});}else{lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection);}
return child;}
var lib$es6$promise$then$$default=lib$es6$promise$then$$then;function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&typeof object==='object'&&object.constructor===Constructor){return object;}
var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$resolve(promise,object);return promise;}
var lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve;var lib$es6$promise$$internal$$PROMISE_ID=Math.random().toString(36).substring(16);function lib$es6$promise$$internal$$noop(){}
var lib$es6$promise$$internal$$PENDING=void 0;var lib$es6$promise$$internal$$FULFILLED=1;var lib$es6$promise$$internal$$REJECTED=2;var lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject();function lib$es6$promise$$internal$$selfFulfillment(){return new TypeError("You cannot resolve a promise with itself");}
function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError('A promises callback cannot return that same promise.');}
function lib$es6$promise$$internal$$getThen(promise){try{return promise.then;}catch(error){lib$es6$promise$$internal$$GET_THEN_ERROR.error=error;return lib$es6$promise$$internal$$GET_THEN_ERROR;}}
function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler);}catch(e){return e;}}
function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=false;var error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){if(sealed){return;}
sealed=true;if(thenable!==value){lib$es6$promise$$internal$$resolve(promise,value);}else{lib$es6$promise$$internal$$fulfill(promise,value);}},function(reason){if(sealed){return;}
sealed=true;lib$es6$promise$$internal$$reject(promise,reason);},'Settle: '+(promise._label||' unknown promise'));if(!sealed&&error){sealed=true;lib$es6$promise$$internal$$reject(promise,error);}},promise);}
function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){if(thenable._state===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,thenable._result);}else if(thenable._state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,thenable._result);}else{lib$es6$promise$$internal$$subscribe(thenable,undefined,function(value){lib$es6$promise$$internal$$resolve(promise,value);},function(reason){lib$es6$promise$$internal$$reject(promise,reason);});}}
function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable,then){if(maybeThenable.constructor===promise.constructor&&then===lib$es6$promise$then$$default&&constructor.resolve===lib$es6$promise$promise$resolve$$default){lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable);}else{if(then===lib$es6$promise$$internal$$GET_THEN_ERROR){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error);}else if(then===undefined){lib$es6$promise$$internal$$fulfill(promise,maybeThenable);}else if(lib$es6$promise$utils$$isFunction(then)){lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then);}else{lib$es6$promise$$internal$$fulfill(promise,maybeThenable);}}}
function lib$es6$promise$$internal$$resolve(promise,value){if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFulfillment());}else if(lib$es6$promise$utils$$objectOrFunction(value)){lib$es6$promise$$internal$$handleMaybeThenable(promise,value,lib$es6$promise$$internal$$getThen(value));}else{lib$es6$promise$$internal$$fulfill(promise,value);}}
function lib$es6$promise$$internal$$publishRejection(promise){if(promise._onerror){promise._onerror(promise._result);}
lib$es6$promise$$internal$$publish(promise);}
function lib$es6$promise$$internal$$fulfill(promise,value){if(promise._state!==lib$es6$promise$$internal$$PENDING){return;}
promise._result=value;promise._state=lib$es6$promise$$internal$$FULFILLED;if(promise._subscribers.length!==0){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise);}}
function lib$es6$promise$$internal$$reject(promise,reason){if(promise._state!==lib$es6$promise$$internal$$PENDING){return;}
promise._state=lib$es6$promise$$internal$$REJECTED;promise._result=reason;lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise);}
function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers;var length=subscribers.length;parent._onerror=null;subscribers[length]=child;subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment;subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection;if(length===0&&parent._state){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent);}}
function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return;}
var child,callback,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail);}else{callback(detail);}}
promise._subscribers.length=0;}
function lib$es6$promise$$internal$$ErrorObject(){this.error=null;}
var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject();function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail);}catch(e){lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e;return lib$es6$promise$$internal$$TRY_CATCH_ERROR;}}
function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var hasCallback=lib$es6$promise$utils$$isFunction(callback),value,error,succeeded,failed;if(hasCallback){value=lib$es6$promise$$internal$$tryCatch(callback,detail);if(value===lib$es6$promise$$internal$$TRY_CATCH_ERROR){failed=true;error=value.error;value=null;}else{succeeded=true;}
if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn());return;}}else{value=detail;succeeded=true;}
if(promise._state!==lib$es6$promise$$internal$$PENDING){}else if(hasCallback&&succeeded){lib$es6$promise$$internal$$resolve(promise,value);}else if(failed){lib$es6$promise$$internal$$reject(promise,error);}else if(settled===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,value);}else if(settled===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value);}}
function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function resolvePromise(value){lib$es6$promise$$internal$$resolve(promise,value);},function rejectPromise(reason){lib$es6$promise$$internal$$reject(promise,reason);});}catch(e){lib$es6$promise$$internal$$reject(promise,e);}}
var lib$es6$promise$$internal$$id=0;function lib$es6$promise$$internal$$nextId(){return lib$es6$promise$$internal$$id++;}
function lib$es6$promise$$internal$$makePromise(promise){promise[lib$es6$promise$$internal$$PROMISE_ID]=lib$es6$promise$$internal$$id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[];}
function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise;}
var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all;function lib$es6$promise$promise$race$$race(entries){var Constructor=this;if(!lib$es6$promise$utils$$isArray(entries)){return new Constructor(function(resolve,reject){reject(new TypeError('You must pass an array to race.'));});}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject);}});}}
var lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race;function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$reject(promise,reason);return promise;}
var lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject;function lib$es6$promise$promise$$needsResolver(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');}
function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}
var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){this[lib$es6$promise$$internal$$PROMISE_ID]=lib$es6$promise$$internal$$nextId();this._result=this._state=undefined;this._subscribers=[];if(lib$es6$promise$$internal$$noop!==resolver){typeof resolver!=='function'&&lib$es6$promise$promise$$needsResolver();this instanceof lib$es6$promise$promise$$Promise?lib$es6$promise$$internal$$initializePromise(this,resolver):lib$es6$promise$promise$$needsNew();}}
lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default;lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default;lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default;lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default;lib$es6$promise$promise$$Promise._setScheduler=lib$es6$promise$asap$$setScheduler;lib$es6$promise$promise$$Promise._setAsap=lib$es6$promise$asap$$setAsap;lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap;lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:lib$es6$promise$then$$default,'catch':function(onRejection){return this.then(null,onRejection);}};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;function lib$es6$promise$enumerator$$Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(lib$es6$promise$$internal$$noop);if(!this.promise[lib$es6$promise$$internal$$PROMISE_ID]){lib$es6$promise$$internal$$makePromise(this.promise);}
if(lib$es6$promise$utils$$isArray(input)){this._input=input;this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){lib$es6$promise$$internal$$fulfill(this.promise,this._result);}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){lib$es6$promise$$internal$$fulfill(this.promise,this._result);}}}else{lib$es6$promise$$internal$$reject(this.promise,lib$es6$promise$enumerator$$validationError());}}
function lib$es6$promise$enumerator$$validationError(){return new Error('Array Methods must be provided an Array');}
lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){var length=this.length;var input=this._input;for(var i=0;this._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){this._eachEntry(input[i],i);}};lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve=c.resolve;if(resolve===lib$es6$promise$promise$resolve$$default){var then=lib$es6$promise$$internal$$getThen(entry);if(then===lib$es6$promise$then$$default&&entry._state!==lib$es6$promise$$internal$$PENDING){this._settledAt(entry._state,i,entry._result);}else if(typeof then!=='function'){this._remaining--;this._result[i]=entry;}else if(c===lib$es6$promise$promise$$default){var promise=new c(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$handleMaybeThenable(promise,entry,then);this._willSettleAt(promise,i);}else{this._willSettleAt(new c(function(resolve){resolve(entry);}),i);}}else{this._willSettleAt(resolve(entry),i);}};lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===lib$es6$promise$$internal$$PENDING){this._remaining--;if(state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value);}else{this._result[i]=value;}}
if(this._remaining===0){lib$es6$promise$$internal$$fulfill(promise,this._result);}};lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,undefined,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value);},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason);});};function lib$es6$promise$polyfill$$polyfill(){var local;if(typeof global!=='undefined'){local=global;}else if(typeof self!=='undefined'){local=self;}else{try{local=Function('return this')();}catch(e){throw new Error('polyfill failed because global object is unavailable in this environment');}}
var P=local.Promise;if(P&&Object.prototype.toString.call(P.resolve())==='[object Promise]'&&!P.cast){return;}
local.Promise=lib$es6$promise$promise$$default;}
var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill;var lib$es6$promise$umd$$ES6Promise={'Promise':lib$es6$promise$promise$$default,'polyfill':lib$es6$promise$polyfill$$default};if(typeof define==='function'&&define['amd']){define(function(){return lib$es6$promise$umd$$ES6Promise;});}else if(typeof module!=='undefined'&&module['exports']){module['exports']=lib$es6$promise$umd$$ES6Promise;}else if(typeof this!=='undefined'){this['ES6Promise']=lib$es6$promise$umd$$ES6Promise;}
lib$es6$promise$polyfill$$default();}).call(this);'use strict';var http=require('http');var https=require('https');var urllib=require('url');var utillib=require('util');var zlib=require('zlib');var dns=require('dns');var Stream=require('stream').Readable;var CookieJar=require('./cookiejar').CookieJar;var encodinglib=require('encoding');var net=require('net');var USE_ALLOC=typeof Buffer.alloc==='function';exports.FetchStream=FetchStream;exports.CookieJar=CookieJar;exports.fetchUrl=fetchUrl;function FetchStream(url,options){Stream.call(this);options=options||{};this.url=url;if(!this.url){return this.emit('error',new Error('url not defined'));}
this.userAgent=options.userAgent||'FetchStream';this._redirect_count=0;this.options=options||{};this.normalizeOptions();if(typeof setImmediate!=='undefined'){setImmediate(this.runStream.bind(this,url));}else{process.nextTick(this.runStream.bind(this,url));}
this.responseBuffer=USE_ALLOC?Buffer.alloc(0,'','binary'):new Buffer(0,'binary');this.ended=false;this.readyToRead=0;}
utillib.inherits(FetchStream,Stream);FetchStream.prototype._read=function(size){if(this.ended&&this.responseBuffer.length===0){this.push(null);return;}
this.readyToRead+=size;this.drainBuffer();};FetchStream.prototype.drainBuffer=function(){if(this.readyToRead===0){return;}
if(this.responseBuffer.length===0){return;}
var push;var rest;var restSize;if(this.responseBuffer.length>this.readyToRead){push=USE_ALLOC?Buffer.alloc(this.readyToRead,'','binary'):new Buffer(this.readyToRead,'binary');this.responseBuffer.copy(push,0,0,this.readyToRead);restSize=this.responseBuffer.length-this.readyToRead;rest=USE_ALLOC?Buffer.alloc(restSize,'','binary'):new Buffer(restSize,'binary');this.responseBuffer.copy(rest,0,this.readyToRead);}else{push=this.responseBuffer;rest=USE_ALLOC?Buffer.alloc(0,'','binary'):new Buffer(0,'binary');}
this.responseBuffer=rest;this.readyToRead=0;if(this.options.encoding){this.push(push,this.options.encoding);}else{this.push(push);}};FetchStream.prototype.destroy=function(ex){this.emit('destroy',ex);};FetchStream.prototype.normalizeOptions=function(){this.cookieJar=this.options.cookieJar||new CookieJar();if(!this.options.disableRedirect&&typeof this.options.maxRedirects!=='number'&&!(this.options.maxRedirects instanceof Number)){this.options.maxRedirects=10;}else if(this.options.disableRedirects){this.options.maxRedirects=0;}
this.options.headers=this.options.headers||{};var keys=Object.keys(this.options.headers);var newheaders={};var i;for(i=keys.length-1;i>=0;i--){newheaders[keys[i].toLowerCase().trim()]=this.options.headers[keys[i]];}
this.options.headers=newheaders;if(!this.options.headers['user-agent']){this.options.headers['user-agent']=this.userAgent;}
if(!this.options.headers.pragma){this.options.headers.pragma='no-cache';}
if(!this.options.headers['cache-control']){this.options.headers['cache-control']='no-cache';}
if(!this.options.disableGzip){this.options.headers['accept-encoding']='gzip, deflate';}else{delete this.options.headers['accept-encoding'];}
if(!this.options.maxResponseLength){this.options.maxResponseLength=Infinity;}
if(!this.options.method){this.options.method=this.options.payload||this.options.payloadSize?'POST':'GET';}
if(this.options.cookies){for(i=0;i<this.options.cookies.length;i++){this.cookieJar.setCookie(this.options.cookies[i],this.url);}}
if(typeof this.options.rejectUnauthorized==='undefined'){this.options.rejectUnauthorized=true;}};FetchStream.prototype.parseUrl=function(url){var urlparts=urllib.parse(url,false,true),transport,urloptions={host:urlparts.hostname||urlparts.host,port:urlparts.port,path:urlparts.pathname+(urlparts.search||'')||'/',method:this.options.method,rejectUnauthorized:this.options.rejectUnauthorized};switch(urlparts.protocol){case'https:':transport=https;break;case'http:':default:transport=http;break;}
if(transport===https){if('agentHttps'in this.options){urloptions.agent=this.options.agentHttps;}
if('agent'in this.options){urloptions.agent=this.options.agent;}}else{if('agentHttp'in this.options){urloptions.agent=this.options.agentHttp;}
if('agent'in this.options){urloptions.agent=this.options.agent;}}
if(!urloptions.port){switch(urlparts.protocol){case'https:':urloptions.port=443;break;case'http:':default:urloptions.port=80;break;}}
urloptions.headers=this.options.headers||{};if(urlparts.auth){var buf=USE_ALLOC?Buffer.alloc(Buffer.byteLength(urlparts.auth),urlparts.auth):new Buffer(urlparts.auth);urloptions.headers.Authorization='Basic '+buf.toString('base64');}
return{urloptions:urloptions,transport:transport};};FetchStream.prototype.setEncoding=function(encoding){this.options.encoding=encoding;};FetchStream.prototype.runStream=function(url){var url_data=this.parseUrl(url),cookies=this.cookieJar.getCookies(url);if(cookies){url_data.urloptions.headers.cookie=cookies;}else{delete url_data.urloptions.headers.cookie;}
if(this.options.payload){url_data.urloptions.headers['content-length']=Buffer.byteLength(this.options.payload||'','utf-8');}
if(this.options.payloadSize){url_data.urloptions.headers['content-length']=this.options.payloadSize;}
if(this.options.asyncDnsLoookup){var dnsCallback=(function(err,addresses){if(err){this.emit('error',err);return;}
url_data.urloptions.headers.host=url_data.urloptions.hostname||url_data.urloptions.host;url_data.urloptions.hostname=addresses[0];url_data.urloptions.host=url_data.urloptions.headers.host+(url_data.urloptions.port?':'+url_data.urloptions.port:'');this._runStream(url_data,url);}).bind(this);if(net.isIP(url_data.urloptions.host)){dnsCallback(null,[url_data.urloptions.host]);}else{dns.resolve4(url_data.urloptions.host,dnsCallback);}}else{this._runStream(url_data,url);}};FetchStream.prototype._runStream=function(url_data,url){var req=url_data.transport.request(url_data.urloptions,(function(res){if(Array.isArray(res.headers['set-cookie'])){for(var i=0;i<res.headers['set-cookie'].length;i++){this.cookieJar.setCookie(res.headers['set-cookie'][i],url);}}
if([301,302,303,307,308].indexOf(res.statusCode)>=0){if(!this.options.disableRedirects&&this.options.maxRedirects>this._redirect_count&&res.headers.location){this._redirect_count++;req.destroy();this.runStream(urllib.resolve(url,res.headers.location));return;}}
this.meta={status:res.statusCode,responseHeaders:res.headers,finalUrl:url,redirectCount:this._redirect_count,cookieJar:this.cookieJar};var curlen=0,maxlen,receive=(function(chunk){if(curlen+chunk.length>this.options.maxResponseLength){maxlen=this.options.maxResponseLength-curlen;}else{maxlen=chunk.length;}
if(maxlen<=0){return;}
curlen+=Math.min(maxlen,chunk.length);if(maxlen>=chunk.length){if(this.responseBuffer.length===0){this.responseBuffer=chunk;}else{this.responseBuffer=Buffer.concat([this.responseBuffer,chunk]);}}else{this.responseBuffer=Buffer.concat([this.responseBuffer,chunk],this.responseBuffer.length+maxlen);}
this.drainBuffer();}).bind(this),error=(function(e){this.ended=true;this.emit('error',e);this.drainBuffer();}).bind(this),end=(function(){this.ended=true;if(this.responseBuffer.length===0){this.push(null);}}).bind(this),unpack=(function(type,res){var z=zlib['create'+type]();z.on('data',receive);z.on('error',error);z.on('end',end);res.pipe(z);}).bind(this);this.emit('meta',this.meta);if(res.headers['content-encoding']){switch(res.headers['content-encoding'].toLowerCase().trim()){case'gzip':return unpack('Gunzip',res);case'deflate':return unpack('InflateRaw',res);}}
res.on('data',receive);res.on('end',end);}).bind(this));req.on('error',(function(e){this.emit('error',e);}).bind(this));if(this.options.timeout){req.setTimeout(this.options.timeout,req.abort.bind(req));}
this.on('destroy',req.abort.bind(req));if(this.options.payload){req.end(this.options.payload);}else if(this.options.payloadStream){this.options.payloadStream.pipe(req);this.options.payloadStream.resume();}else{req.end();}};function fetchUrl(url,options,callback){if(!callback&&typeof options==='function'){callback=options;options=undefined;}
options=options||{};var fetchstream=new FetchStream(url,options),response_data,chunks=[],length=0,curpos=0,buffer,content_type,callbackFired=false;fetchstream.on('meta',function(meta){response_data=meta;content_type=_parseContentType(meta.responseHeaders['content-type']);});fetchstream.on('data',function(chunk){if(chunk){chunks.push(chunk);length+=chunk.length;}});fetchstream.on('error',function(error){if(error&&error.code==='HPE_INVALID_CONSTANT'){return;}
if(callbackFired){return;}
callbackFired=true;callback(error);});fetchstream.on('end',function(){if(callbackFired){return;}
callbackFired=true;buffer=USE_ALLOC?Buffer.alloc(length):new Buffer(length);for(var i=0,len=chunks.length;i<len;i++){chunks[i].copy(buffer,curpos);curpos+=chunks[i].length;}
if(content_type.mimeType==='text/html'){content_type.charset=_findHTMLCharset(buffer)||content_type.charset;}
content_type.charset=(options.overrideCharset||content_type.charset||'utf-8').trim().toLowerCase();if(!options.disableDecoding&&!content_type.charset.match(/^utf-?8$/i)){buffer=encodinglib.convert(buffer,'UTF-8',content_type.charset);}
if(options.outputEncoding){return callback(null,response_data,buffer.toString(options.outputEncoding));}else{return callback(null,response_data,buffer);}});}
function _parseContentType(str){if(!str){return{};}
var parts=str.split(';'),mimeType=parts.shift(),charset,chparts;for(var i=0,len=parts.length;i<len;i++){chparts=parts[i].split('=');if(chparts.length>1){if(chparts[0].trim().toLowerCase()==='charset'){charset=chparts[1];}}}
return{mimeType:(mimeType||'').trim().toLowerCase(),charset:(charset||'UTF-8').trim().toLowerCase()};}
function _findHTMLCharset(htmlbuffer){var body=htmlbuffer.toString('ascii'),input,meta,charset;if((meta=body.match(/<meta\s+http-equiv=["']content-type["'][^>]*?>/i))){input=meta[0];}
if(input){charset=input.match(/charset\s?=\s?([a-zA-Z\-0-9]*);?/);if(charset){charset=(charset[1]||'').trim().toLowerCase();}}
if(!charset&&(meta=body.match(/<meta\s+charset=["'](.*?)["']/i))){charset=(meta[1]||'').trim().toLowerCase();}
return charset;}
(function(window,document){ready(function(){forEach(document.querySelectorAll('[data-js-toggle-dropdown]'),function(el,i){var dropdown=el.parentNode.querySelector('[data-js-dropdown]');el.addEventListener('click',function(e){e.preventDefault();if(dropdown.classList.contains('is-active')){this.classList.remove('is-active');dropdown.classList.remove('is-active');}else{this.classList.add('is-active');dropdown.classList.add('is-active');}});el.addEventListener('blur',function(e){this.classList.remove('is-active');dropdown.classList.remove('is-active');});});});}(window,document));ready(function(){isempty();unfocus.style('box-shadow: none !important;');});
//# sourceMappingURL=app.js.map
