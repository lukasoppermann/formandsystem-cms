!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.sortable=t()}(this,function(){"use strict";var e,t,n,r=[],a=[],i=function(e,t,n){return void 0===n?e&&e.h5s&&e.h5s.data&&e.h5s.data[t]:(e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n,void 0)},o=function(e){e.h5s&&delete e.h5s.data};switch(!0){case"matches"in window.Element.prototype:n="matches";break;case"msMatchesSelector"in window.Element.prototype:n="msMatchesSelector";break;case"webkitMatchesSelector"in window.Element.prototype:n="webkitMatchesSelector"}var s=function(e,t){if(!t)return Array.prototype.slice.call(e);for(var r=[],a=0;a<e.length;++a)"string"==typeof t&&e[a][n](t)&&r.push(e[a]),t.indexOf(e[a])!==-1&&r.push(e[a]);return r},d=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)d(e[r],t,n);else e.addEventListener(t,n),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=n},l=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)l(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])},c=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)c(e[r],t,n);else e.setAttribute(t,n)},f=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)f(e[n],t);else e.removeAttribute(t)},u=function(e){var t=e.getClientRects()[0];return{left:t.left+window.scrollX,top:t.top+window.scrollY}},p=function(e){l(e,"dragstart"),l(e,"dragend"),l(e,"selectstart"),l(e,"dragover"),l(e,"dragenter"),l(e,"drop")},h=function(e){l(e,"dragover"),l(e,"dragenter"),l(e,"drop")},g=function(e,t){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t.draggedItem,t.x,t.y)},m=function(e,t){return t.x||(t.x=parseInt(e.pageX-u(t.draggedItem).left)),t.y||(t.y=parseInt(e.pageY-u(t.draggedItem).top)),t},v=function(e,t){var n={draggedItem:t};n=m(e,n),g(e,n)},y=function(e){o(e),f(e,"aria-dropeffect")},b=function(e){f(e,"aria-grabbed"),f(e,"draggable"),f(e,"role")},x=function(e,t){return e===t||void 0!==i(e,"connectWith")&&i(e,"connectWith")===i(t,"connectWith")},E=function(e,t){var n,r=[];if(!t)return e;for(var a=0;a<e.length;++a)n=e[a].querySelectorAll(t),r=r.concat(Array.prototype.slice.call(n));return r},w=function(e){var t=i(e,"opts")||{},n=s(e.children,t.items),r=E(n,t.handle);h(e),y(e),l(r,"mousedown"),p(n),b(n)},I=function(e){var t=i(e,"opts"),n=s(e.children,t.items),r=E(n,t.handle);c(e,"aria-dropeffect","move"),c(r,"draggable","true");var a=(document||window.document).createElement("span");"function"!=typeof a.dragDrop||t.disableIEFix||d(r,"mousedown",function(){if(n.indexOf(this)!==-1)this.dragDrop();else{for(var e=this.parentElement;t.items.indexOf(e)===-1;)e=e.parentElement;e.dragDrop()}})},A=function(e){var t=i(e,"opts"),n=s(e.children,t.items),r=E(n,t.handle);c(e,"aria-dropeffect","none"),c(r,"draggable","false"),l(r,"mousedown")},O=function(e){var t=i(e,"opts"),n=s(e.children,t.items),r=E(n,t.handle);p(n),l(r,"mousedown"),h(e)},C=function(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):0},D=function(e){return!!e.parentNode},j=function(e){if("string"!=typeof e)return e;var t=document.createElement("div");return t.innerHTML=e,t.firstChild},S=function(e,t){e.parentElement.insertBefore(t,e)},L=function(e,t){e.parentElement.insertBefore(t,e.nextElementSibling)},W=function(e){e.parentNode&&e.parentNode.removeChild(e)},N=function(e,t){var n=document.createEvent("Event");return t&&(n.detail=t),n.initEvent(e,!1,!0),n},P=function(e,t){a.forEach(function(n){x(e,n)&&n.dispatchEvent(t)})},T=function(n,o){var l=String(o);return o=function(e){var t={connectWith:!1,placeholder:null,dragImage:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1};for(var n in e)t[n]=e[n];return t}(o),"string"==typeof n&&(n=document.querySelectorAll(n)),n instanceof window.Element&&(n=[n]),n=Array.prototype.slice.call(n),n.forEach(function(n){if(/enable|disable|destroy/.test(l))return void T[l](n);o=i(n,"opts")||o,i(n,"opts",o),O(n);var f,p,h=s(n.children,o.items),m=o.placeholder;if(m||(m=document.createElement(/^ul|ol$/i.test(n.tagName)?"li":"div")),m=j(m),m.classList.add.apply(m.classList,o.placeholderClass.split(" ")),!n.getAttribute("data-sortable-id")){var y=a.length;a[y]=n,c(n,"data-sortable-id",y),c(h,"data-item-sortable-id",y)}if(i(n,"items",o.items),r.push(m),o.connectWith&&i(n,"connectWith",o.connectWith),I(n),c(h,"role","option"),c(h,"aria-grabbed","false"),o.hoverClass){var b="sortable-over";"string"==typeof o.hoverClass&&(b=o.hoverClass),d(h,"mouseenter",function(){this.classList.add(b)}),d(h,"mouseleave",function(){this.classList.remove(b)})}d(h,"dragstart",function(r){r.stopImmediatePropagation(),o.dragImage?(g(r,{draggedItem:o.dragImage,x:0,y:0}),console.log("WARNING: dragImage option is deprecated and will be removed in the future!")):v(r,this),this.classList.add(o.draggingClass),e=this,c(e,"aria-grabbed","true"),f=C(e),t=parseInt(window.getComputedStyle(e).height),p=this.parentElement,P(n,N("sortstart",{item:e,placeholder:m,startparent:p}))}),d(h,"dragend",function(){var a;if(e){if(e.classList.remove(o.draggingClass),c(e,"aria-grabbed","false"),e.style.display=e.oldDisplay,delete e.oldDisplay,r.forEach(W),a=this.parentElement,P(n,N("sortstop",{item:e,startparent:p})),f!==C(e)||p!==a){var d=s(p.children,i(p,"items"));P(n,N("sortupdate",{draggedItem:{item:e,index:s(a.children,i(a,"items")).indexOf(e),oldIndex:h.indexOf(e),get position(){return this.index+1},get oldPosition(){return this.oldIndex+1}},startParent:{item:p,items:Array.prototype.map.call(d,function(e){return{item:e,oldIndex:h.indexOf(e),index:Array.prototype.indexOf.call(d,e),get hasChanged(){return this.oldIndex!==this.index},get position(){return this.index+1}}})},endParent:{item:a,items:Array.prototype.map.call(a.children,function(e){return{item:e,index:Array.prototype.indexOf.call(a.children,e),get position(){return this.index+1}}})}}))}e=null,t=null}}),d([n,m],"drop",function(t){var a;x(n,e.parentElement)&&(t.preventDefault(),t.stopPropagation(),a=r.filter(D)[0],L(a,e),e.dispatchEvent(N("dragend")))});var E=function(a){if(x(n,e.parentElement))if(a.preventDefault(),a.stopPropagation(),a.dataTransfer.dropEffect="move",h.indexOf(this)!==-1){var i=parseInt(window.getComputedStyle(this).height),d=C(m),l=C(this);if(o.forcePlaceholderSize&&(m.style.height=t+"px"),i>t){var c=i-t,f=u(this).top;if(d<l&&a.pageY<f+c)return;if(d>l&&a.pageY>f+i-c)return}void 0===e.oldDisplay&&(e.oldDisplay=e.style.display),e.style.display="none",d<l?L(this,m):S(this,m),r.filter(function(e){return e!==m}).forEach(W)}else r.indexOf(this)!==-1||s(this.children,o.items).length||(r.forEach(W),this.appendChild(m))};d(h.concat(n),"dragover",E),d(h.concat(n),"dragenter",E)}),n};return T.destroy=function(e){w(e)},T.enable=function(e){I(e)},T.disable=function(e){A(e)},T});
//# sourceMappingURL=sortable-elements.min.js.map
