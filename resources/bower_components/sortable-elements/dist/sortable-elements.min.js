!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.sortable=t()}(this,function(){"use strict";var e,t,n,r,a=[],i=[],o=function(e,t,n){return void 0===n?e&&e.h5s&&e.h5s.data&&e.h5s.data[t]:(e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n,void 0)},s=function(e){e.h5s&&delete e.h5s.data};switch(!0){case"matches"in window.Element.prototype:r="matches";break;case"msMatchesSelector"in window.Element.prototype:r="msMatchesSelector";break;case"webkitMatchesSelector"in window.Element.prototype:r="webkitMatchesSelector"}var d=function(e,t){if(!t)return Array.prototype.slice.call(e);for(var n=[],a=0;a<e.length;++a)"string"==typeof t&&e[a][r](t)&&n.push(e[a]),t.indexOf(e[a])!==-1&&n.push(e[a]);return n},l=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)l(e[r],t,n);else e.addEventListener(t,n),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=n},c=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])},f=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)f(e[r],t,n);else e.setAttribute(t,n)},u=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)u(e[n],t);else e.removeAttribute(t)},h=function(e){var t=e.getClientRects()[0];return{left:t.left+window.scrollX,top:t.top+window.scrollY}},p=function(e){c(e,"dragstart"),c(e,"dragend"),c(e,"selectstart"),c(e,"dragover"),c(e,"dragenter"),c(e,"drop")},g=function(e){c(e,"dragover"),c(e,"dragenter"),c(e,"drop")},m=function(e,t){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t.draggedItem,t.x,t.y)},v=function(e,t){return t.x||(t.x=parseInt(e.pageX-h(t.draggedItem).left)),t.y||(t.y=parseInt(e.pageY-h(t.draggedItem).top)),t},b=function(e,t){var n={draggedItem:t};n=v(e,n),m(e,n)},y=function(e){s(e),u(e,"aria-dropeffect")},x=function(e){u(e,"aria-grabbed"),u(e,"draggable"),u(e,"role")},E=function(e,t){return e===t||void 0!==o(e,"connectWith")&&o(e,"connectWith")===o(t,"connectWith")},w=function(e,t){var n,r=[];if(!t)return e;for(var a=0;a<e.length;++a)n=e[a].querySelectorAll(t),r=r.concat(Array.prototype.slice.call(n));return r},I=function(e){var t=o(e,"opts")||{},n=d(e.children,t.items),r=w(n,t.handle);g(e),y(e),c(r,"mousedown"),p(n),x(n)},C=function(e){var t=o(e,"opts"),n=d(e.children,t.items),r=w(n,t.handle);f(e,"aria-dropeffect","move"),f(r,"draggable","true");var a=(document||window.document).createElement("span");"function"!=typeof a.dragDrop||t.disableIEFix||l(r,"mousedown",function(){if(n.indexOf(this)!==-1)this.dragDrop();else{for(var e=this.parentElement;t.items.indexOf(e)===-1;)e=e.parentElement;e.dragDrop()}})},A=function(e){var t=o(e,"opts"),n=d(e.children,t.items),r=w(n,t.handle);f(e,"aria-dropeffect","none"),f(r,"draggable","false"),c(r,"mousedown")},j=function(e){e.forEach(function(e,t){o(e,"sortable-index",t)})},O=function(e){var t=o(e,"opts"),n=d(e.children,t.items),r=w(n,t.handle);j(n),p(n),c(r,"mousedown"),g(e)},D=function(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):0},S=function(e){return!!e.parentNode},L=function(e){if("string"!=typeof e)return e;var t=document.createElement("div");return t.innerHTML=e,t.firstChild},W=function(e,t){e.parentElement.insertBefore(t,e)},N=function(e,t){e.parentElement.insertBefore(t,e.nextElementSibling)},P=function(e){e.parentNode&&e.parentNode.removeChild(e)},T=function(e,t){var n=document.createEvent("Event");return t&&(n.detail=t),n.initEvent(e,!1,!0),n},M=function(e,t){i.forEach(function(n){E(e,n)&&n.dispatchEvent(t)})},k=function(r,s){var c=String(s);return s=function(e){var t={connectWith:!1,placeholder:null,dragImage:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1};for(var n in e)t[n]=e[n];return t}(s),"string"==typeof r&&(r=document.querySelectorAll(r)),r instanceof window.Element&&(r=[r]),r=Array.prototype.slice.call(r),r.forEach(function(r){if(/enable|disable|destroy/.test(c))return void k[c](r);s=o(r,"opts")||s,o(r,"opts",s),O(r);var u,p,g=d(r.children,s.items),v=s.placeholder;if(v||(v=document.createElement(/^ul|ol$/i.test(r.tagName)?"li":"div")),v=L(v),v.classList.add.apply(v.classList,s.placeholderClass.split(" ")),!r.getAttribute("data-sortable-id")){var y=i.length;i[y]=r,f(r,"data-sortable-id",y),f(g,"data-item-sortable-id",y)}if(o(r,"items",s.items),a.push(v),s.connectWith&&o(r,"connectWith",s.connectWith),C(r),f(g,"role","option"),f(g,"aria-grabbed","false"),s.hoverClass){var x="sortable-over";"string"==typeof s.hoverClass&&(x=s.hoverClass),l(g,"mouseenter",function(){this.classList.add(x)}),l(g,"mouseleave",function(){this.classList.remove(x)})}l(g,"dragstart",function(a){a.stopImmediatePropagation(),s.dragImage?(m(a,{draggedItem:s.dragImage,x:0,y:0}),console.log("WARNING: dragImage option is deprecated and will be removed in the future!")):b(a,this),this.classList.add(s.draggingClass),e=this,f(e,"aria-grabbed","true"),u=D(e),t=parseInt(window.getComputedStyle(e).height),n=parseInt(window.getComputedStyle(e).width),p=this.parentElement,M(r,T("sortstart",{item:e,placeholder:v,startparent:p}))}),l(g,"dragend",function(){var i;if(e){if(e.classList.remove(s.draggingClass),f(e,"aria-grabbed","false"),e.style.display=e.oldDisplay,delete e.oldDisplay,a.forEach(P),i=this.parentElement,M(r,T("sortstop",{item:e,startparent:p})),u!==D(e)||p!==i){var l=d(p.children,o(p,"items")),c=d(i.children,o(i,"items"));M(r,T("sortupdate",{draggedItem:{item:e,index:d(i.children,o(i,"items")).indexOf(e),oldIndex:o(e,"sortable-index"),get position(){return this.index+1},get oldPosition(){return this.oldIndex+1}},startParent:{item:p,items:l.map(function(e,t){return{item:e,index:t,oldIndex:o(e,"sortable-index"),get hasChanged(){return this.oldIndex!==this.index},get position(){return this.index+1}}})},endParent:{item:i,items:c.map(function(e,t){return{item:e,index:t,oldIndex:o(e,"sortable-index"),get hasChanged(){return this.oldIndex!==this.index},get position(){return this.index+1}}})}})),j(c),j(l)}e=null,t=null,n=null}}),l([r,v],"drop",function(t){var n;E(r,e.parentElement)&&(t.preventDefault(),t.stopPropagation(),n=a.filter(S)[0],N(n,e),e.dispatchEvent(T("dragend")))});var w=function(i){if(E(r,e.parentElement))if(i.preventDefault(),i.stopPropagation(),i.dataTransfer.dropEffect="move",g.indexOf(this)!==-1){var o=parseInt(window.getComputedStyle(this).height),l=D(v),c=D(this);if(s.forcePlaceholderSize&&(v.style.height=t+"px",v.style.width=n+"px"),o>t){var f=o-t,u=h(this).top;if(l<c&&i.pageY<u+f)return;if(l>c&&i.pageY>u+o-f)return}void 0===e.oldDisplay&&(e.oldDisplay=e.style.display),e.style.display="none",l<c?N(this,v):W(this,v),a.filter(function(e){return e!==v}).forEach(P)}else a.indexOf(this)!==-1||d(this.children,s.items).length||(a.forEach(P),this.appendChild(v))};l(g.concat(r),"dragover",w),l(g.concat(r),"dragenter",w)}),r};return k.destroy=function(e){I(e)},k.enable=function(e){C(e)},k.disable=function(e){A(e)},k});
//# sourceMappingURL=sortable-elements.min.js.map
